<figure class="base-grid">
  <figcaption>
    <p>
      Examples of the optimization of semi transparent images for different layers and units.
      TODO: Allow to select between light/dark/checkerboard backgound, also show the alpha mask.
    </p>

    <p>
      {#each modes as _, i}
        <label>
          <input type='radio' bind:group='mode' value='{modes[i]}' />
          {mode_names[i]} <br/>
        </label>
      {/each}
    </p>

  </figcaption>
  <div id='container' class="{mode}">
    {#each images as img, i}
      <svg width="100%" height="224px" viewBox="0 0 448 448">
        <defs>
          {#if mode!='alpha' & mode!='rgb'}
            <mask id="mask{i}">
              <image xlink:href="images/transparent/alpha/{img}"
              x="0" y="0" height="448px" width="448px"/>
            </mask>
          {/if}
        </defs>
        <image xlink:href="images/transparent/{mode=='alpha' ? 'alpha' : 'rgb'}/{img}"
            x="0" y="0" height="448px" width="448px"
            mask="url(#mask{i})"/>
      </svg>
    {/each}
  </div>
</figure>


<style>
  #container {
    display: grid;
    grid-gap: 10px;
    grid-template-columns: repeat(3, 1fr);
    grid-column: text-start / text-end;
  }

  .checkerboard {
    background-image: url("images/checkerboard.png");
  }
    
  .black {
    background-color: black;
  }


  svg {
    border-radius: 4px;
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
  }

  svg:hover{
    transform: scale(1.6);
  }


  figure {
    margin-top: 0;
    margin-bottom: 0;
  }

  figcaption {
    grid-column: kicker;
  }

</style>


<script>
export default {
  data() {
    return {
      mode: 'light',
      modes: ['light', 'checkerboard', 'black', 'alpha', 'rgb'],
      mode_names: [
        'light background',
        'checkerboard background',
        'black background',
        'alpha channel',
        'rgb channels'
      ],
      images: [
        "mixed4a_pool_reduce_pre_relu_15.jpg",
        "mixed4a_pool_reduce_pre_relu_29.jpg",
        "mixed4a_pool_reduce_pre_relu_52.jpg",
        "mixed4b_pool_reduce_pre_relu_14.jpg",
        "mixed4b_pool_reduce_pre_relu_16.jpg",
        "mixed4b_pool_reduce_pre_relu_27.jpg",
        "mixed4b_pool_reduce_pre_relu_40.jpg",
        "mixed4b_pool_reduce_pre_relu_46.jpg",
        "mixed4d_3x3_bottleneck_pre_relu_139.jpg",
      ]
    }
  },
}
</script>
